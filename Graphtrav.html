<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Graph Traversal Explained</title>

<style>
body {
  margin: 0;
  background: #0b0f1a;
  color: #e5e7eb;
  font-family: system-ui, sans-serif;
  display: flex;
  height: 100vh;
}

#left {
  width: 55%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

#right {
  width: 45%;
  background: #020617;
  padding: 20px;
  overflow-y: auto;
  border-left: 1px solid #1e293b;
}

h1, h2 {
  margin-top: 0;
}

button {
  background: #1f2937;
  color: white;
  border: 1px solid #334155;
  padding: 10px 16px;
  margin: 6px;
  border-radius: 6px;
  cursor: pointer;
}

button:hover {
  background: #334155;
}

svg {
  background: #020617;
  border-radius: 12px;
  margin-top: 10px;
}

.node {
  fill: #1f2937;
  stroke: #475569;
  stroke-width: 2;
}

.node.visited {
  fill: #22c55e;
}

.edge {
  stroke: #334155;
  stroke-width: 2;
}

.node-label {
  fill: #e5e7eb;
  font-size: 14px;
  font-weight: bold;
  text-anchor: middle;
  dominant-baseline: middle;
  pointer-events: none;
}

.box {
  margin-bottom: 12px;
  padding: 12px;
  background: #020617;
  border: 1px solid #1e293b;
  border-radius: 6px;
}
</style>
</head>

<body>

<!-- LEFT SIDE: GRAPH -->
<div id="left">
  <h1>Graph Traversal</h1>

  <div>
    <button onclick="startBFS()">▶ Breadth-First Search</button>
    <button onclick="startDFS()">▶ Depth-First Search</button>
  </div>

  <svg width="460" height="300">

    <!-- Edges -->
    <line class="edge" x1="230" y1="40" x2="130" y2="140"/>
    <line class="edge" x1="230" y1="40" x2="330" y2="140"/>
    <line class="edge" x1="130" y1="140" x2="80" y2="240"/>
    <line class="edge" x1="130" y1="140" x2="180" y2="240"/>
    <line class="edge" x1="330" y1="140" x2="280" y2="240"/>
    <line class="edge" x1="330" y1="140" x2="380" y2="240"/>

    <!-- Nodes -->
    <circle id="A" class="node" cx="230" cy="40" r="20"/>
    <text x="230" y="40" class="node-label">A</text>

    <circle id="B" class="node" cx="130" cy="140" r="20"/>
    <text x="130" y="140" class="node-label">B</text>

    <circle id="C" class="node" cx="330" cy="140" r="20"/>
    <text x="330" y="140" class="node-label">C</text>

    <circle id="D" class="node" cx="80" cy="240" r="20"/>
    <text x="80" y="240" class="node-label">D</text>

    <circle id="E" class="node" cx="180" cy="240" r="20"/>
    <text x="180" y="240" class="node-label">E</text>

    <circle id="F" class="node" cx="280" cy="240" r="20"/>
    <text x="280" y="240" class="node-label">F</text>

    <circle id="G" class="node" cx="380" cy="240" r="20"/>
    <text x="380" y="240" class="node-label">G</text>
  </svg>
</div>

<!-- RIGHT SIDE: EXPLANATION -->
<div id="right">
  <h2>Explanation (Read Me)</h2>

  <div class="box">
    <b>What is a graph?</b><br><br>
    A graph is made of <b>nodes</b> (the circles) and <b>edges</b> (the lines).<br><br>
    You can think of nodes as places and edges as paths between them.
  </div>

  <div class="box">
    <b>What is graph traversal?</b><br><br>
    Traversal means <b>visiting every node</b> in the graph in a sensible order.<br><br>
    Computers need rules so they don’t get stuck or keep going in circles forever.
  </div>

  <div class="box">
    <b>Why do we mark nodes as visited?</b><br><br>
    Some graphs contain loops.<br>
    If we don’t remember where we’ve been, the computer would never stop.<br><br>
    Marking nodes as <b>visited</b> prevents infinite loops.
  </div>

  <div class="box">
    <b>Breadth-First Search (BFS)</b><br><br>
    BFS visits <b>all nearby nodes first</b> before going deeper.<br><br>
    It uses a <b>queue</b> (first in, first out).<br><br>
    This means BFS can find the <b>shortest path</b>.
  </div>

  <div class="box">
    <b>Depth-First Search (DFS)</b><br><br>
    DFS goes <b>as far as possible down one path</b> before coming back.<br><br>
    It uses a <b>stack</b> (last in, first out).<br><br>
    This is useful for exploring all possible routes.
  </div>

  <div id="live" class="box">
    Click BFS or DFS to see each step explained here.
  </div>
</div>

<script>
const graph = {
  A: ["B", "C"],
  B: ["D", "E"],
  C: ["F", "G"],
  D: [], E: [], F: [], G: []
};

function reset() {
  document.querySelectorAll(".node").forEach(n =>
    n.classList.remove("visited")
  );
}

function explain(text) {
  document.getElementById("live").innerHTML = text;
}

function visit(node, delay, text) {
  setTimeout(() => {
    document.getElementById(node).classList.add("visited");
    explain(text);
  }, delay);
}

function startBFS() {
  reset();
  let queue = ["A"];
  let visited = new Set();
  let time = 0;

  explain(
    "<b>BFS starts at node A.</b><br><br>" +
    "We will visit all nearby nodes before moving further away."
  );

  while (queue.length) {
    let node = queue.shift();
    if (!visited.has(node)) {
      visited.add(node);
      visit(
        node,
        time,
        "We are now visiting node <b>" + node + "</b>.<br><br>" +
        "It is marked as visited so we don’t return here.<br><br>" +
        "Its neighbours are added to the <b>queue</b>."
      );
      time += 1200;
      graph[node].forEach(n => queue.push(n));
    }
  }
}

function startDFS() {
  reset();
  let stack = ["A"];
  let visited = new Set();
  let time = 0;

  explain(
    "<b>DFS starts at node A.</b><br><br>" +
    "We will go as deep as possible before backtracking."
  );

  while (stack.length) {
    let node = stack.pop();
    if (!visited.has(node)) {
      visited.add(node);
      visit(
        node,
        time,
        "We are now visiting node <b>" + node + "</b>.<br><br>" +
        "DFS continues down this path before trying others.<br><br>" +
        "This uses a <b>stack</b>."
      );
      time += 1200;
      graph[node].slice().reverse().forEach(n => stack.push(n));
    }
  }
}
</script>

</body>
</html>
